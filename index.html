<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARMSignalX - Pro Live Terminal</title>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: #010409; color: white; margin: 0; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Header */
        .header { height: 50px; background: #0d1117; display: flex; justify-content: space-between; align-items: center; padding: 0 10px; border-bottom: 2px solid #238636; flex-shrink: 0; }
        .nav-group { display: flex; gap: 8px; align-items: center; }
        .btn-nav { text-decoration: none; font-size: 10px; font-weight: bold; border: 1px solid #30363d; padding: 6px 10px; border-radius: 4px; color: #8b949e; }

        /* Controls */
        .controls { background: #0d1117; padding: 10px; display: flex; flex-direction: column; gap: 8px; border-bottom: 1px solid #30363d; }
        .row { display: flex; gap: 8px; }
        select { flex: 1; height: 40px; background: #161b22; color: white; border: 1px solid #30363d; border-radius: 8px; font-weight: bold; padding-left: 5px; }
        .btn-run { background: #238636; flex: 1; border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; }

        /* Main Area */
        .main { flex: 1; display: flex; flex-direction: column; overflow-y: auto; }
        .box-chart { height: 350px; border-bottom: 1px solid #30363d; flex-shrink: 0; }
        
        /* Real Signal Gauge Area */
        .box-ai { min-height: 450px; background: #0d1117; padding: 10px; flex-shrink: 0; }
        
        /* Chat */
        .chat-box { flex: 1; min-height: 250px; display: flex; flex-direction: column; background: #010409; border-top: 1px solid #30363d; }
        .chat-messages { flex: 1; padding: 10px; overflow-y: auto; font-size: 12px; font-family: monospace; }
        .chat-input-area { padding: 8px; background: #0d1117; display: flex; gap: 5px; }
        #chat-input { flex: 1; background: #161b22; border: 1px solid #30363d; border-radius: 5px; color: white; padding: 8px; outline: none; }
        .btn-send { background: #238636; border: none; border-radius: 5px; color: white; padding: 0 15px; cursor: pointer; }

        .msg-ai { color: #2ea043; font-weight: bold; }
        .msg-user { color: #58a6ff; font-weight: bold; }
    </style>
</head>
<body>

<div class="header">
    <div class="nav-group">
        <span style="font-size: 12px; font-weight: bold; color: #238636;">ARMSignalX PRO</span>
        <span style="font-size: 9px; color: #8b949e; border: 1px solid #30363d; padding: 2px 5px; border-radius: 4px;">LIVE DATA</span>
    </div>
    <div id="clock" style="font-size: 11px; font-family: monospace; color: #8b949e;">00:00:00</div>
</div>

<div class="controls">
    <div class="row">
        <select id="pairSelect" onchange="changeSymbol()">
            <option value="BINANCE:BTCUSDT">BTC / USDT (Bitcoin)</option>
            <option value="BINANCE:ETHUSDT">ETH / USDT (Ethereum)</option>
            <option value="BINANCE:SOLUSDT">SOL / USDT (Solana)</option>
            <option value="OANDA:XAUUSD">GOLD / USD (Ոսկի)</option>
        </select>
        <button class="btn-run" onclick="changeSymbol()">UPDATE ⚡</button>
    </div>
</div>

<div class="main">
    <div id="chart_container" class="box-chart"></div>

    <div class="box-ai" id="ai_container">
        </div>

    <div class="chat-box">
        <div class="chat-messages" id="chat-msgs">
            <div style="color: #8b949e;">[SYSTEM] Բոլոր համակարգերը պատրաստ են: Իրական ժամանակի սիգնալները միացված են:</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Հարցրու AI-ին...">
            <button class="btn-send" onclick="sendMessage()">➤</button>
        </div>
    </div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
    let currentSymbol = "BINANCE:BTCUSDT";

    // 1. Ֆունկցիա՝ Գրաֆիկը թարմացնելու համար
    function loadChart(symbol) {
        new TradingView.widget({
            "autosize": true,
            "symbol": symbol,
            "interval": "1",
            "timezone": "Etc/UTC",
            "theme": "dark",
            "style": "1",
            "locale": "en",
            "toolbar_bg": "#f1f3f6",
            "enable_publishing": false,
            "hide_top_toolbar": true,
            "container_id": "chart_container"
        });
    }

    // 2. Ֆունկցիա՝ Իրական Սիգնալի վիդջեթը թարմացնելու համար
    function loadSignalWidget(symbol) {
        const container = document.getElementById('ai_container');
        container.innerHTML = ''; // Մաքրել հինը
        
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js';
        script.async = true;
        
        const config = {
            "interval": "1m",
            "width": "100%",
            "isTransparent": false,
            "height": "420",
            "symbol": symbol,
            "showIntervalTabs": true,
            "displayMode": "single",
            "locale": "en",
            "colorTheme": "dark"
        };
        
        script.innerHTML = JSON.stringify(config);
        container.appendChild(script);
    }

    // 3. Փոխել արժույթը
    function changeSymbol() {
        currentSymbol = document.getElementById('pairSelect').value;
        loadChart(currentSymbol);
        loadSignalWidget(currentSymbol);
        addLog("SYSTEM", `Արժույթը փոխվեց: Նոր թիրախ՝ ${currentSymbol}`);
    }

    // Լրացուցիչ ֆունկցիաներ (Ժամացույց և Chat)
    function updateClock() {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString();
    }
    setInterval(updateClock, 1000);

    function sendMessage() {
        const input = document.getElementById('chat-input');
        if (!input.value) return;
        addLog("USER", input.value);
        setTimeout(() => {
            addLog("AI", "Վերլուծելով շուկայի տվյալները՝ խորհուրդ եմ տալիս հետևել Strong Buy/Sell գոտիներին:");
        }, 1000);
        input.value = "";
    }

    function addLog(sender, text) {
        const msgs = document.getElementById('chat-msgs');
        msgs.innerHTML += `<div><span class="msg-${sender.toLowerCase()}">${sender}:</span> ${text}</div>`;
        msgs.scrollTop = msgs.scrollHeight;
    }

    // Առաջին անգամ բեռնելիս
    window.onload = () => {
        loadChart(currentSymbol);
        loadSignalWidget(currentSymbol);
    };
</script>

</body>
</html>
